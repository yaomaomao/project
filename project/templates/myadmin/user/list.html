{% extends "myadmin/public/base.html"  %}

{% block title %}
<title>会员列表</title>
{% endblock title %}

{% block header %}
<div class="row">
    <div class="am-u-sm-12 am-u-md-12 am-u-lg-9">
        <div class="page-header-heading"><span class="am-icon-home page-header-heading-icon"></span> 会员列表 <small>Amaze UI</small></div>
     </div>
    <div class="am-u-lg-3 tpl-index-settings-button">
        <button type="button" class="page-header-button"><span class="am-icon-paint-brush"></span> 设置</button>
    </div>
</div>
{% endblock header %}

{% block con %}
<div class="widget am-cf">
        <div class="widget-head am-cf">
            <div class="widget-title  am-cf">会员列表</div>


        </div>
        <div class="widget-body  am-fr">

            <div class="am-u-sm-12 am-u-md-6 am-u-lg-6">
                <div class="am-form-group">
                    <div class="am-btn-toolbar">
                        <div class="am-btn-group am-btn-group-xs">
                            <button type="button" class="am-btn am-btn-default am-btn-success"><span class="am-icon-plus"></span> 新增</button>
                            <button type="button" class="am-btn am-btn-default am-btn-secondary"><span class="am-icon-save"></span> 保存</button>
                            <button type="button" class="am-btn am-btn-default am-btn-warning"><span class="am-icon-archive"></span> 审核</button>
                            <button type="button" class="am-btn am-btn-default am-btn-danger"><span class="am-icon-trash-o"></span> 删除</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="am-u-sm-12 am-u-md-6 am-u-lg-3">
                <div class="am-form-group tpl-table-list-select">
                    <div class="am-selected am-dropdown " id="am-selected-l5gl0" data-am-dropdown="">  <button type="button" class="am-selected-btn am-btn am-dropdown-toggle am-btn-sm am-btn-default">    <span class="am-selected-status am-fl">所有类别</span>    <i class="am-selected-icon am-icon-caret-down"></i>  </button>  <div class="am-selected-content am-dropdown-content">    <h2 class="am-selected-header"><span class="am-icon-chevron-left">返回</span></h2>       <ul class="am-selected-list">                     <li class="am-checked" data-index="0" data-group="0" data-value="option1">         <span class="am-selected-text">所有类别</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="1" data-group="0" data-value="option2">         <span class="am-selected-text">IT业界</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="2" data-group="0" data-value="option3">         <span class="am-selected-text">数码产品</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="3" data-group="0" data-value="option3">         <span class="am-selected-text">笔记本电脑</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="4" data-group="0" data-value="option3">         <span class="am-selected-text">平板电脑</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="5" data-group="0" data-value="option3">         <span class="am-selected-text">只能手机</span>         <i class="am-icon-check"></i></li>                                 <li class="" data-index="6" data-group="0" data-value="option3">         <span class="am-selected-text">超极本</span>         <i class="am-icon-check"></i></li>            </ul>    <div class="am-selected-hint"></div>  </div></div>
                </div>
            </div>
            <div class="am-u-sm-12 am-u-md-12 am-u-lg-3">
                <div class="am-input-group am-input-group-sm tpl-form-border-form cl-p">
                    <input type="text" class="am-form-field ">
                    <span class="am-input-group-btn">
<button class="am-btn  am-btn-default am-btn-success tpl-table-list-field am-icon-search" type="button"></button>
</span>
                </div>
            </div>

            <div class="am-u-sm-12">
                <table width="100%" class="am-table am-table-compact am-table-striped tpl-table-black ">
                    
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>头像</th>
                            <th>用户名</th>
                            <th>邮箱</th>
                            <th>手机号</th>
                            <th>性别</th>
                            <th>年龄</th>
                            <th>状态</th>
                            <th>注册时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in userlist %}
                        <tr class="gradeX">
                            
                            <td class="am-text-middle">{{ user.id }}</td>
                            <td>
                                <img src="{{ user.pic|default:'/static/pics/user.jpg' }}" class="tpl-table-line-img" alt="">
                            </td>
                            <td class="am-text-middle">{{ user.username }}</td>
                            <td class="am-text-middle">{{ user.email }}</td>
                            <td class="am-text-middle">{{ user.phone }}</td>
                            <td class="am-text-middle">{{ user.sex }}</td>
                            <td class="am-text-middle">{{ user.age }}</td>
                            <td class="am-text-middle">
                                {% if user.status == 0 %}
                                会员
                                {% else %}
                                禁用
                                {% endif %}
                            </td>
                            <td class="am-text-middle">{{ user.addtime|date:"Y-m-d H-i-s" }}</td>
                            <td class="am-text-middle">
                                <div class="tpl-table-black-operation">
                                    <a href="{% url 'myadmin_user_edit' %}?uid={{ user.id }}">
                                        <i class="am-icon-pencil"></i> 编辑
                                    </a>
                                    <a href="javascript:;" class="tpl-table-black-operation-del">
                                        <i class="am-icon-trash"></i> 删除
                                    </a>
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        <!-- more data -->
                    </tbody>
                </table>
            </div>
            <div class="am-u-lg-12 am-cf">

                <div class="am-fr">
                    <ul class="am-pagination tpl-pagination">
                        <li class="am-disabled"><a href="#">«</a></li>
                        <li class="am-active"><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li><a href="#">»</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<script>
    $(".tpl-table-black-operation-del").click(function(){
        id = $(this).parents("tr").find("td:eq(0)").text()
        user = $(this)
        $.get("{% url 'myadmin_user_delete' %}",{uid:id},function(data){
            alert(data.msg)
            if (data.type == 0){
                user.parents("tr").remove()
            }
        },'json')
    })
</script>
{% endblock con %}